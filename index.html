<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis redes Sociales y mis Trabajos</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Chakra+Petch:wght@700&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            font-family: 'Poppins', sans-serif;
        }

        body {
            /* Fondo de pantalla con la imagen proporcionada */
            background-image: url('https://raw.githubusercontent.com/juanmartinbarrientos/Mis-Redes/main/logo.jpeg?raw=true');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        canvas {
            display: block;
        }
        
        .content-section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            /* Efecto de cristal semitransparente */
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .content-section h2 {
            /* Color de texto blanco para tema oscuro */
            color: #ffffff; 
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .video-wrapper {
            width: 90%;
            max-width: 320px; /* Ancho ajustado para formato short */
            aspect-ratio: 9 / 16; /* Aspect ratio para shorts */
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .video-wrapper iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }

        .linkedin-post-wrapper {
            width: 100%;
            max-width: 504px;
            height: 750px; /* Altura ajustada para mejor visualización en móviles */
            border-radius: 12px;
            overflow: auto; /* Scroll si el contenido es más grande */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: #fff; /* Fondo para el iframe de LinkedIn */
        }
        
        .linkedin-post-wrapper iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }
        
        .section-description {
            /* Color de texto claro para tema oscuro */
            color: #e9ecef;
            max-width: 600px;
            text-align: center;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .cta-button {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .cta-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        
        /* Estilos para la sección de Contacto en tema oscuro */
        .contact-section {
            padding-top: 30px;
            padding-bottom: 30px;
            border-top: none;
            background-color: rgba(0, 0, 0, 0.6); /* Un poco más oscuro para que resalte */
        }
        .contact-container {
            text-align: center;
        }
        .email-text {
            font-size: 1.1em;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }
        .contact-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .contact-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: none;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
        }
        .contact-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        .contact-button.whatsapp {
            background-color: #25D366;
        }
        .contact-button.whatsapp:hover {
            background-color: #1DA851;
        }

        .copy-success-message {
            display: block;
            margin-top: 15px;
            color: #25D366;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.5s ease;
        }


        footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1em;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .glitch-link {
            font-family: 'Chakra Petch', sans-serif;
            font-weight: 700;
            position: relative;
            color: #00f0ff;  
            text-decoration: none;
            font-size: 1.2em;
        }

        .glitch-link::before,
        .glitch-link::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0); /* Transparente para el efecto glitch */
            overflow: hidden;
        }

        .glitch-link::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch-link::after {
            left: -2px;
            text-shadow: -1px 0 #49ff00;
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(45% 0 50% 0); }
            20% { clip-path: inset(10% 0 85% 0); }
            40% { clip-path: inset(80% 0 10% 0); }
            60% { clip-path: inset(25% 0 60% 0); }
            80% { clip-path: inset(55% 0 30% 0); }
            100% { clip-path: inset(90% 0 5% 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(70% 0 25% 0); }
            20% { clip-path: inset(40% 0 55% 0); }
            40% { clip-path: inset(15% 0 80% 0); }
            60% { clip-path: inset(60% 0 35% 0); }
            80% { clip-path: inset(30% 0 65% 0); }
            100% { clip-path: inset(75% 0 15% 0); }
        }
    </style>
</head>
<body>

    <canvas id="linktreeCanvas"></canvas>
    
    <section class="content-section contact-section">
        <div class="contact-container">
            <p class="email-text">juanmartinbarrientos@me.com</p>
            <div class="contact-buttons">
                <button id="copyEmailBtn" class="contact-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zM8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z"/><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"/></svg>
                    Copiar Email
                </button>
                <a href="mailto:juanmartinbarrientos@me.com" class="contact-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg>
                    Enviar Email
                </a>
                <a href="https://wa.me/5491169578193?text=Vi%20tus%20redes%20sociales%20y%20trabajos" target="_blank" class="contact-button whatsapp">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.068-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>
                    WhatsApp
                </a>
            </div>
            <span id="copySuccess" class="copy-success-message"></span>
        </div>
    </section>

    <section class="content-section">
        <h2>Mis Trabajos</h2>
        <p class="section-description">
            ¿Quieres una página web impactante como esta? Con la magia de la inteligencia artificial, puedo diseñarla para ti, ¡incluso gratis! Y si buscas un toque más personal y profesional, ofrezco mis servicios para llevar tu visión al siguiente nivel. ¡Explora mis creaciones y descubre lo que podemos construir juntos!
        </p>
        <a href="https://juanmartinbarrientos.github.io/Perfiles/" target="_blank" class="cta-button">Ver Mi Portafolio</a>
    </section>

    <section class="content-section">
        <h2>Ejemplo de Creación</h2>
        <div class="video-wrapper">
            <iframe src="https://www.youtube.com/embed/PXkqafr6Rmg" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
    </section>

    <section class="content-section">
        <h2>Última Publicación</h2>
        <div class="linkedin-post-wrapper">
             <iframe src="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:7342227309992599554" height="1348" width="504" frameborder="0" allowfullscreen="" title="Publicación integrada"></iframe>
        </div>
    </section>

    <footer>
        Hecho por <a href="https://jmb-138.github.io/puff/" target="_blank" class="glitch-link" data-text="Juan Martin Barrientos">Juan Martin Barrientos</a>
    </footer>

    <script>
        const canvas = document.getElementById('linktreeCanvas');
        const ctx = canvas.getContext('2d');
        let width, height, centerX, centerY;
        const profilePic = new Image();
        profilePic.src = 'https://raw.githubusercontent.com/juone0450/roblox2/main/Juan.jpg';
        const mouse = { x: undefined, y: undefined };
        const iconSVGs = {
            youtube: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M21.582,6.186C21.325,5.242,20.552,4.5,19.57,4.273C17.84,3.8,12,3.8,12,3.8s-5.84,0-7.57,0.473 C3.448,4.5,2.675,5.242,2.418,6.186C1.98,7.94,1.98,12,1.98,12s0,4.06,0.438,5.814c0.257,0.944,1.03,1.686,2.012,1.913 C8.16,20.2,12,20.2,12,20.2s5.84,0,7.57-0.473c0.982-0.227,1.755-0.969,2.012-1.913C22.02,16.06,22.02,12,22.02,12S22.02,7.94,21.582,6.186z M10,15.5v-7l6,3.5L10,15.5z"/></svg>`,
            tiktok: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.03-4.83-.65-6.48-2.31-1.72-1.76-2.55-4.15-2.4-6.62.17-2.44 1.69-4.64 3.73-5.77 2.06-1.14 4.54-1.22 6.62-.25.02 1.6.02 3.2-.01 4.78-.31-.02-.62-.03-.93-.03-1.56 0-3.1.53-4.04 1.86-1.06 1.48-1.05 3.54.04 5.03.95 1.3 2.62 1.92 4.22 1.49.8-.22 1.46-.84 1.83-1.59.32-.64.48-1.36.48-2.08.01-2.93.01-5.85.01-8.78Z"/></svg>`,
            instagram: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.85-.07-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.058 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.359 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.359-.2 6.78-2.618 6.98-6.98.058-1.281.072-1.689.072-4.947s-.014-3.667-.072-4.947c-.2-4.359-2.618-6.78-6.98-6.98-1.281-.059-1.689-.072-4.948-.072zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/></svg>`,
            github: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>`,
            linkedin: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>`,
            cv: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM16 18H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>`
        };
        const links = [
            { label: 'YouTube', url: 'https://www.youtube.com/@JuanMartinBarrientosLorusso', iconSVG: iconSVGs.youtube },
            { label: 'TikTok', url: 'https://www.tiktok.com/@jmartinbarrientos', iconSVG: iconSVGs.tiktok },
            { label: 'Instagram', url: 'https://www.instagram.com/juanmartinbarrientos/', iconSVG: iconSVGs.instagram },
            { label: 'GitHub', url: 'https://github.com/juone0450', iconSVG: iconSVGs.github },
            { label: 'LinkedIn', url: 'https://www.linkedin.com/in/juanmartinbarrientoslorusso/', iconSVG: iconSVGs.linkedin },
            { label: 'Mi CV', url: 'https://juone0450.github.io/porfolio02/', iconSVG: iconSVGs.cv }
        ];

        function setCanvasSize() {
            const canvasElement = document.getElementById('linktreeCanvas');
            // Se aumenta la altura del canvas para que el último botón no quede tapado
            const canvasHeight = 700; 

            width = canvasElement.width = window.innerWidth;
            height = canvasElement.height = canvasHeight;
            centerX = width / 2;
            centerY = height / 2;
            calculateButtonLayout();
        }

        function calculateButtonLayout() {
            const buttonHeight = 55;
            const buttonWidth = Math.min(width * 0.8, 400);
            const gap = 20;
            const picSize = 100;
            const totalContentHeight = picSize + 40 + (links.length * (buttonHeight + gap));
            let startY = (height / 2) - (totalContentHeight / 2) + 20;
            links.profilePicY = startY;
            let titleY = startY + picSize + 25;
            links.titleY = titleY;
            let buttonStartY = titleY + 40;
            links.forEach((link, index) => {
                link.x = centerX - buttonWidth / 2;
                link.y = buttonStartY + index * (buttonHeight + gap);
                link.width = buttonWidth;
                link.height = buttonHeight;
                link.isHovered = false;
            });
        }
        
        function drawRoundedRect(x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.arcTo(x + w, y, x + w, y + h, r);
            ctx.arcTo(x + w, y + h, x, y + h, r);
            ctx.arcTo(x, y + h, x, y, r);
            ctx.arcTo(x, y, x + w, y, r);
            ctx.closePath();
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);
            const picSize = 100;
            const picY = links.profilePicY || centerY - 250;
            ctx.save();
            ctx.beginPath();
            ctx.arc(centerX, picY + picSize / 2, picSize / 2, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.clip();
            if (profilePic.complete) ctx.drawImage(profilePic, centerX - picSize / 2, picY, picSize, picSize);
            ctx.restore();
            ctx.lineWidth = 3;
            /* Borde de la foto de perfil en color blanco para tema oscuro */
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)'; 
            ctx.beginPath();
            ctx.arc(centerX, picY + picSize / 2, picSize / 2, 0, Math.PI * 2, true);
            ctx.stroke();
            
            /* Color del @usuario en blanco para tema oscuro */
            ctx.fillStyle = 'white'; 
            ctx.font = '600 24px Poppins';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = 'rgba(0,0,0,0.5)';
            ctx.shadowBlur = 4;
            ctx.shadowOffsetY = 2;
            if (links.titleY) ctx.fillText('@juanmartinbarrientos', centerX, links.titleY);
            ctx.shadowColor = 'transparent';
            
            links.forEach(link => {
                // Se mantiene el estilo de botones azules, resaltan bien en fondo oscuro
                ctx.fillStyle = link.isHovered ? 'rgba(0, 123, 255, 0.9)' : 'rgba(0, 123, 255, 0.7)';
                ctx.strokeStyle = 'rgba(0, 123, 255, 1)';
                ctx.lineWidth = 1;
                drawRoundedRect(link.x, link.y, link.width, link.height, 12);
                ctx.fill();
                ctx.stroke();
                
                const iconSize = 24;
                const iconPadding = 20;
                const iconX = link.x + iconPadding;
                const iconY = link.y + (link.height - iconSize) / 2;
                if (link.iconImage && link.iconImage.complete) {
                    ctx.drawImage(link.iconImage, iconX, iconY, iconSize, iconSize);
                }
                
                const textPadding = 15;
                ctx.fillStyle = 'white'; 
                ctx.font = '400 18px Poppins';
                ctx.textAlign = 'left';
                ctx.textBaseline = 'middle';
                const textX = iconX + iconSize + textPadding;
                ctx.fillText(link.label, textX, link.y + link.height / 2);
            });
        }
        
        function loadAssets() {
            const profilePicPromise = new Promise((resolve, reject) => {
                if (profilePic.complete) return resolve();
                profilePic.onload = () => resolve();
                profilePic.onerror = () => reject(new Error('Failed to load profile picture'));
            });

            const iconPromises = links.map(link => {
                return new Promise((resolve, reject) => {
                    link.iconImage = new Image();
                    link.iconImage.onload = () => resolve();
                    link.iconImage.onerror = () => reject(new Error(`Failed to load icon for ${link.label}`));
                    const svg_b64 = window.btoa(link.iconSVG);
                    link.iconImage.src = `data:image/svg+xml;base64,${svg_b64}`;
                });
            });

            Promise.all([profilePicPromise, ...iconPromises])
                .then(() => {
                    console.log("All assets loaded successfully");
                    setCanvasSize();
                    draw();
                })
                .catch(error => {
                    console.error("Asset loading failed:", error);
                    ctx.fillStyle = 'red';
                    ctx.font = '16px Poppins';
                    ctx.textAlign = 'center';
                    ctx.fillText('Error al cargar los recursos. Intenta refrescar.', width/2, height/2);
                });
        }

        window.addEventListener('resize', () => {
            setCanvasSize();
            draw();
        });
        
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouse.x = e.clientX - rect.left;
            mouse.y = e.clientY - rect.top;
            
            let needsRedraw = false;
            links.forEach(link => {
                const isCurrentlyOver = mouse.x >= link.x && mouse.x <= link.x + link.width &&
                                         mouse.y >= link.y && mouse.y <= link.y + link.height;
                if (link.isHovered !== isCurrentlyOver) {
                    link.isHovered = isCurrentlyOver;
                    needsRedraw = true;
                }
            });
            
            canvas.style.cursor = links.some(l => l.isHovered) ? 'pointer' : 'default';

            if (needsRedraw) {
                draw();
            }
        });

        canvas.addEventListener('click', (e) => {
            links.forEach(link => {
                if (link.isHovered) {
                    window.open(link.url, '_blank');
                }
            });
        });

        // Cargar todo después de que la imagen de perfil y los SVGs se hayan procesado
        loadAssets();

        // Funcionalidad del botón de copiar email
        const copyEmailBtn = document.getElementById('copyEmailBtn');
        const copySuccessMsg = document.getElementById('copySuccess');
        const emailToCopy = 'juanmartinbarrientos@me.com';

        copyEmailBtn.addEventListener('click', () => {
            const textArea = document.createElement('textarea');
            textArea.value = emailToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                copySuccessMsg.textContent = '¡Email copiado!';
                copySuccessMsg.style.opacity = '1';
                setTimeout(() => {
                    copySuccessMsg.style.opacity = '0';
                }, 2000);
            } catch (err) {
                console.error('Error al copiar el email: ', err);
                copySuccessMsg.textContent = 'Error al copiar';
            }
            document.body.removeChild(textArea);
        });

    </script>
</body>
</html>
